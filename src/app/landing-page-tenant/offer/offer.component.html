<!-- Offer Start -->
<div id="offer" class="offer container-fluid my-5 py-5 text-center position-relative overlay-top overlay-bottom">
  <div class="container py-5">
    <h1 class="offer-title">Reg√≠strate para recibir promociones üéâ</h1>
    <h2 class="text-white mb-3">¬°Al registrarte obtienes un cup√≥n de descuento exclusivo!</h2>
    <h5 class="text-white font-weight-normal mb-4 pb-3">
      ‚ú® ‚ÄúReg√≠strate y forma parte de nuestra comunidad exclusiva: solo quienes est√°n dentro reciben promociones
      especiales, sorpresas y descuentos que nadie m√°s tendr√°.‚Äù
    </h5>

    <form [formGroup]="customerForm" (ngSubmit)="onSubmit()" class="offer-form">
      <div class="form-row">
        <div class="form-group">
          <label for="name">Nombre Completo</label>
          <input type="text" id="name" formControlName="name" class="form-control p-4" placeholder="Tu Nombre">
          <div *ngIf="customerForm.get('name')?.invalid && customerForm.get('name')?.touched" class="error-message">
            <small *ngIf="customerForm.get('name')?.errors?.['required']">El nombre es requerido.</small>
            <small *ngIf="customerForm.get('name')?.errors?.['minlength']">Debe tener al menos 2 caracteres.</small>
            <small *ngIf="customerForm.get('name')?.errors?.['maxlength']">M√°ximo 140 caracteres.</small>
            <small *ngIf="customerForm.get('name')?.errors?.['pattern']">Solo letras y espacios permitidos.</small>
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" formControlName="email" class="form-control p-4" placeholder="Tu Email">
          <div *ngIf="customerForm.get('email')?.invalid && customerForm.get('email')?.touched" class="error-message">
            <small *ngIf="customerForm.get('email')?.errors?.['required']">El email es requerido.</small>
            <small *ngIf="customerForm.get('email')?.errors?.['email']">Email inv√°lido.</small>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="birthDate">Fecha de Nacimiento</label>
          <input type="date" id="birthDate" formControlName="birthDate" class="form-control p-4">
          <div *ngIf="customerForm.get('birthDate')?.invalid && customerForm.get('birthDate')?.touched" class="error-message">
            <small *ngIf="customerForm.get('birthDate')?.errors?.['required']">La fecha de nacimiento es requerida.</small>
            <small *ngIf="customerForm.get('birthDate')?.errors?.['invalidDate']">Fecha inv√°lida.</small>
            <small *ngIf="customerForm.get('birthDate')?.errors?.['minAge']">Debes tener m√°s de 12 a√±os.</small>
          </div>
        </div>

        <div class="form-group">
          <label for="gender">G√©nero</label>
          <select id="gender" formControlName="gender" class="form-control p-4">
            <option value="" disabled>Selecciona tu g√©nero</option>
            <option value="Hombre">Hombre</option>
            <option value="Mujer">Mujer</option>
            <option value="Otro">Otro</option>
          </select>
          <div *ngIf="customerForm.get('gender')?.invalid && customerForm.get('gender')?.touched" class="error-message">
            <small *ngIf="customerForm.get('gender')?.errors?.['required']">El g√©nero es requerido.</small>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="phone">Tel√©fono (Opcional)</label>
          <input type="tel" id="phone" formControlName="phone" class="form-control p-4" placeholder="Tu Tel√©fono">
          <div *ngIf="customerForm.get('phone')?.invalid && customerForm.get('phone')?.touched" class="error-message">
            <small *ngIf="customerForm.get('phone')?.errors?.['invalidPhone']">Tel√©fono inv√°lido. Debe ser 10 d√≠gitos num√©ricos.</small>
          </div>
        </div>
      </div>

      <!-- Bloque legal: texto informativo sobre promociones y cancelaci√≥n (dise√±o m√°s vistoso) -->
      <div class="legal-text">
        <div class="legal-icon" aria-hidden="true">
          <!-- Envelope icon -->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M3 6.5C3 5.67157 3.67157 5 4.5 5H19.5C20.3284 5 21 5.67157 21 6.5V17.5C21 18.3284 20.3284 19 19.5 19H4.5C3.67157 19 3 18.3284 3 17.5V6.5Z" stroke="currentColor" stroke-width="0" fill="#DA9F5B" />
            <path d="M21 6L12 13L3 6" stroke="#fff" stroke-opacity="0.9" stroke-width="0" fill="#fff" />
          </svg>
        </div>
        <div class="legal-copy">
          <div class="form-check d-flex align-items-center justify-content-center">
            <input id="acceptPromotions" type="checkbox" class="form-check-input mr-2" aria-label="Aceptar promociones" formControlName="acceptedPromotions" />
            <label for="acceptPromotions" class="form-check-label legal-main">Acepto recibir promociones, descuentos y comunicaciones comerciales de este negocio.</label>
          </div>
          <p class="legal-sub">Puedes cancelar tu suscripci√≥n en cualquier momento.</p>
        </div>
      </div>

      <div class="form-actions">
        <button class="btn btn-primary" type="submit" [disabled]="customerForm.invalid || isLoading">
          <span *ngIf="!isLoading">Guardar</span>
          <div *ngIf="isLoading" class="spinner"></div>
        </button>
      </div>

    </form>

    <div *ngIf="successMessage" class="alert alert-success mt-3">{{ successMessage }}</div>
    <div *ngIf="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>

  </div>
</div>
<!-- Offer End -->
