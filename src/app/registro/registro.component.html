<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container px-5">
    <a class="navbar-brand fw-bold" href="#">
      <img src="assets/img/lealtix_logo_transp.png" alt="Lealtix Logo" width="40" height="40" class="me-2" />
      Lealtix
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="/">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Beneficios</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Precios</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Contacto</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Registro Formulario PrimeNG-->
<section class="surface-ground min-h-screen py-8">
  <div class="flex justify-content-center px-4">
    <div class="surface-card p-6 shadow-2 border-round w-full" style="max-width: 600px;">

      <!-- Header del formulario -->
      <div class="text-center mb-6">
        <div class="text-900 text-3xl font-bold mb-3">Registro de Usuario</div>
        <p class="text-600 font-medium line-height-3 m-0">
          Completa los siguientes datos para crear tu cuenta
        </p>
      </div>

      <!-- Formulario -->
      <form [formGroup]="registroForm" (ngSubmit)="onSubmit()" novalidate>
        <div formGroupName="tenant" class="flex flex-column gap-6">

          <!-- Sección: Información Personal -->
          <div class="form-section">
            <div class="section-header mb-4">
              <h4 class="section-title">
                <i class="pi pi-user section-icon"></i>
                Información Personal
              </h4>
              <div class="section-divider"></div>
            </div>

            <div class="flex flex-column gap-4">
              <!-- Nombre Completo -->
              <div class="field">
                <label for="fullName" class="field-label">
                  Nombre completo <span class="required-asterisk">*</span>
                </label>
                <input
                  id="fullName"
                  pInputText
                  formControlName="fullName"
                  class="w-full input-field"
                  [class.p-invalid]="submitted && tenant['fullName'].errors"
                  placeholder="Ingresa tu nombre completo"
                />
                <small
                  *ngIf="submitted && tenant['fullName'].errors"
                  class="error-message">
                  <i class="pi pi-exclamation-circle"></i> El nombre es requerido
                </small>
              </div>

              <!-- Fecha de Nacimiento -->
              <div class="field">
                <label for="fechaNacimiento" class="field-label">
                  Fecha de nacimiento <span class="required-asterisk">*</span>
                </label>
                <input
                  id="fechaNacimiento"
                  pInputText
                  type="date"
                  formControlName="fechaNacimiento"
                  class="w-full input-field"
                  [class.p-invalid]="submitted && tenant['fechaNacimiento'].errors"
                />
                <small
                  *ngIf="submitted && tenant['fechaNacimiento'].errors"
                  class="error-message">
                  <i class="pi pi-exclamation-circle"></i> La fecha de nacimiento es requerida
                </small>
              </div>
            </div>
          </div>

          <!-- Sección: Información de Contacto -->
          <div class="form-section">
            <div class="section-header mb-4">
              <h4 class="section-title">
                <i class="pi pi-phone section-icon"></i>
                Información de Contacto
              </h4>
              <div class="section-divider"></div>
            </div>

            <div class="flex flex-column gap-4">
              <!-- Teléfono -->
              <div class="field">
                <label for="telefono" class="field-label">
                  Número de teléfono
                </label>
                <p-inputNumber
                  id="telefono"
                  formControlName="telefono"
                  class="w-full"
                  placeholder="10 dígitos"
                  [useGrouping]="false"
                  [maxlength]="10"
                  [min]="1000000000"
                  [max]="9999999999"
                  mode="decimal"
                ></p-inputNumber>
                <small class="field-help">
                  <i class="pi pi-info-circle"></i> Formato: 5512345678
                </small>
              </div>

              <!-- Email -->
              <div class="field">
                <label for="email" class="field-label">
                  Correo electrónico <span class="required-asterisk">*</span>
                </label>
                <input
                  pInputText
                  id="email"
                  type="email"
                  formControlName="email"
                  class="w-full input-field"
                  [class.p-invalid]="submitted && tenant['email'].errors"
                  placeholder="ejemplo@correo.com"
                />
                <small
                  *ngIf="submitted && tenant['email'].errors"
                  class="error-message">
                  <i class="pi pi-exclamation-circle"></i> Ingresa un email válido
                </small>
              </div>
            </div>
          </div>

          <!-- Sección: Información de Seguridad -->
          <div class="form-section">
            <div class="section-header mb-4">
              <h4 class="section-title">
                <i class="pi pi-lock section-icon"></i>
                Información de Seguridad
              </h4>
              <div class="section-divider"></div>
            </div>

            <div class="flex flex-column gap-4">
              <!-- Contraseña -->
              <div class="field">
                <label for="password" class="field-label">
                  Contraseña <span class="required-asterisk">*</span>
                </label>
                <div class="password-container">
                  <input
                    id="password"
                    [type]="showPassword ? 'text' : 'password'"
                    pInputText
                    formControlName="password"
                    class="password-input"
                    [class.p-invalid]="submitted && tenant['password'].errors"
                    placeholder="Crea una contraseña segura"
                  />
                  <span
                    class="password-toggle"
                    (click)="togglePasswordVisibility()"
                  >
                    <i [class]="showPassword ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
                  </span>
                </div>
                <small
                  *ngIf="submitted && tenant['password'].errors"
                  class="error-message">
                  <i class="pi pi-exclamation-circle"></i> La contraseña es requerida
                </small>
              </div>
            </div>
          </div>
        </div>

        <!-- Botones de acción -->
        <div class="form-actions mt-6">
          <div class="flex justify-content-between align-items-center gap-3">
            <p-button
              label="Cancelar"
              icon="pi pi-times"
              class="p-button-outlined p-button-secondary flex-1"
              type="button"
              (onClick)="onCancel()"
            ></p-button>

            <p-button
              label="Continuar al Pago"
              icon="pi pi-arrow-right"
              iconPos="right"
              class="p-button-primary action-button flex-2"
              type="submit"
              [loading]="isSubmitting"
            ></p-button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="py-5 bg-dark mt-auto">
  <div class="container px-5 text-center text-white">
    <h5 class="fw-bold">Lealtix</h5>
    <ul class="list-inline">
      <li class="list-inline-item"><a class="text-white" href="/">Inicio</a></li>
      <li class="list-inline-item"><a class="text-white" href="#">Beneficios</a></li>
      <li class="list-inline-item"><a class="text-white" href="#">Precios</a></li>
      <li class="list-inline-item"><a class="text-white" href="#">Contacto</a></li>
    </ul>
    <p class="mt-3 mb-0">© 2025 Lealtix. Todos los derechos reservados.</p>
  </div>
</footer>
