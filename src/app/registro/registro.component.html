
<!-- Navbar using PrimeNG Menubar -->
<p-menubar [model]="menuItems" styleClass="custom-menubar">
  <ng-template pTemplate="start">
    <img src="assets/img/lealtix_logo_transp.png" alt="Lealtix Logo" width="40" height="40" style="margin-right:.5rem;" />
    <span class="brand">Lealtix</span>
  </ng-template>
</p-menubar>

<section class="py-5 bg-light min-vh-100">
  <div class="container px-5 my-5">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <p-card header="Registro de usuario" styleClass="shadow-lg">
          <div class="card-body p-4">
            <p-messages *ngIf="registroForm.invalid && submitted" [value]="[{severity:'error', summary:'Errores en el formulario', detail:'Hay campos obligatorios sin llenar o con errores.'}]">
            </p-messages>

            <form [formGroup]="registroForm" (ngSubmit)="onSubmit()" novalidate>
              <p-card styleClass="mb-4">
                <div formGroupName="tenant">
                  <div class="p-fluid p-formgrid p-grid">
                    <div class="p-field p-col-12 p-md-6">
                      <label for="fullName" class="p-text-bold">Nombre completo *</label>
                      <input id="fullName" pInputText type="text" formControlName="fullName" [ngClass]="{'ng-invalid ng-dirty': submitted && tenant['fullName'].errors}" placeholder="Ingrese su nombre completo" />
                      <small *ngIf="submitted && tenant['fullName'].errors" class="p-error">
                        <span *ngIf="tenant['fullName'].errors['required']">Nombre requerido.</span>
                      </small>
                    </div>

                    <div class="p-field p-col-12 p-md-6">
                      <label for="fechaNacimiento" class="p-text-bold">Fecha de nacimiento *</label>
                      <p-calendar id="fechaNacimiento" formControlName="fechaNacimiento" [showIcon]="true" dateFormat="dd/mm/yy" [maxDate]="today" [ngClass]="{'ng-invalid ng-dirty': submitted && tenant['fechaNacimiento'].errors}"></p-calendar>
                      <small *ngIf="submitted && tenant['fechaNacimiento'].errors" class="p-error">
                        <span *ngIf="tenant['fechaNacimiento'].errors['required']">Fecha de nacimiento requerida.</span>
                      </small>
                    </div>
                  </div>

                  <div class="p-fluid p-formgrid p-grid">
                    <div class="p-field p-col-12 p-md-6">
                      <label for="telefono" class="p-text-bold">Teléfono</label>
                      <input id="telefono" pInputText type="tel" maxlength="10" formControlName="telefono" [ngClass]="{'ng-invalid ng-dirty': submitted && tenant['telefono'].errors}" placeholder="Ingrese su teléfono" />
                      <small *ngIf="submitted && tenant['telefono'].errors" class="p-error">
                        <span *ngIf="tenant['telefono'].errors['required']">Teléfono requerido.</span>
                        <span *ngIf="tenant['telefono'].errors['pattern']">Debe contener exactamente 10 dígitos numéricos.</span>
                      </small>
                    </div>

                    <div class="p-field p-col-12 p-md-6">
                      <label for="email" class="p-text-bold">Email *</label>
                      <input id="email" pInputText type="email" formControlName="email" [disabled]="tenant['email'].disabled" [ngClass]="{'ng-invalid ng-dirty': submitted && tenant['email'].errors}" placeholder="Ingrese su email" />
                      <small *ngIf="submitted && tenant['email'].errors" class="p-error">
                        <span *ngIf="tenant['email'].errors['required']">Email requerido.</span>
                        <span *ngIf="tenant['email'].errors['email']">Formato de email inválido.</span>
                      </small>
                    </div>
                  </div>

                  <div class="p-fluid p-formgrid p-grid">
                    <div class="p-field p-col-12 p-md-6">
                      <label for="password" class="p-text-bold">Password *</label>
                      <p-password id="password" formControlName="password" [toggleMask]="true" [feedback]="false" [ngClass]="{'ng-invalid ng-dirty': submitted && tenant['password'].errors}" placeholder="Ingrese su contraseña"></p-password>
                      <small *ngIf="submitted && tenant['password'].errors" class="p-error">
                        <span *ngIf="tenant['password'].errors['required']">Password requerido.</span>
                      </small>
                    </div>
                  </div>
                </div>
              </p-card>

              <div class="text-end">
                <button pButton type="submit" label="Continuar al pago" icon="pi pi-arrow-right" class="p-button-lg"></button>
              </div>
            </form>
          </div>
        </p-card>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="py-5 bg-dark mt-auto text-white text-center">
  <div class="container px-5">
    <h5 class="fw-bold">Lealtix</h5>
    <ul class="list-inline">
      <li class="list-inline-item"><a class="text-white" href="/">Inicio</a></li>
      <li class="list-inline-item"><a class="text-white" href="#">Beneficios</a></li>
      <li class="list-inline-item"><a class="text-white" href="#">Precios</a></li>
      <li class="list-inline-item"><a class="text-white" href="#">Contacto</a></li>
    </ul>
    <p class="mt-3 mb-0">© 2025 Lealtix. Todos los derechos reservados.</p>
  </div>
</footer>
